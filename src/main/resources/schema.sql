CREATE TABLE IF NOT EXISTS USERS
(
    ID BIGINT GENERATED BY DEFAULT AS IDENTITY NOT NULL,
    NAME VARCHAR(255) NOT NULL,
    EMAIL VARCHAR(512) NOT NULL,
    CONSTRAINT USER_PK PRIMARY KEY (ID),
    CONSTRAINT USER_EMAIL_UQ UNIQUE (EMAIL)
);

CREATE TABLE IF NOT EXISTS REQUESTS
(
    ID BIGINT GENERATED BY DEFAULT AS IDENTITY NOT NULL,
    DESCRIPTION VARCHAR(512),
    REQUESTER_ID BIGINT NOT NULL,
    CREATED TIMESTAMP WITHOUT TIME ZONE NOT NULL,
    CONSTRAINT REQUEST_PK PRIMARY KEY (ID),
    CONSTRAINT REQUESTER_FK FOREIGN KEY (REQUESTER_ID) REFERENCES USERS
);

CREATE TABLE IF NOT EXISTS ITEMS
(
    ID BIGINT GENERATED BY DEFAULT AS IDENTITY NOT NULL,
    OWNER_ID BIGINT NOT NULL,
    NAME VARCHAR(255),
    DESCRIPTION VARCHAR(512),
    AVAILABLE BOOLEAN NOT NULL,
    REQUEST_ID BIGINT NOT NULL,
    CONSTRAINT ITEM_ID PRIMARY KEY (ID),
    CONSTRAINT OWNER_ID_FK FOREIGN KEY (OWNER_ID) REFERENCES USERS,
    CONSTRAINT REQUEST_ID_FK FOREIGN KEY (REQUEST_ID) REFERENCES REQUESTS
);